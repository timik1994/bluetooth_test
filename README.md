# Bluetooth –¢–µ—Å—Ç–µ—Ä

–ü—Ä–æ—Å—Ç–æ–µ Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Bluetooth –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ —Ä–∞–∑–ª–∏—á–Ω—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º, –≤–∫–ª—é—á–∞—è —Ç–µ–ª–µ—Ñ–æ–Ω—ã, —É–º–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ —Ñ–∏—Ç–Ω–µ—Å-–æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîç –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ Bluetooth —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- üì± –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ç–µ–ª–µ—Ñ–æ–Ω–∞–º –∏ —Å–º–∞—Ä—Ç-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º
- üìä –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ª–æ–≥–æ–≤ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π –ø–æ —É—Ä–æ–≤–Ω—è–º (–æ—à–∏–±–∫–∏, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –æ—Ç–ª–∞–¥–∫–∞)
- üèÉ‚Äç‚ôÇÔ∏è –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏—Ç–Ω–µ—Å-—É—Å—Ç—Ä–æ–π—Å—Ç–≤ (–±–µ–≥–æ–≤—ã–µ –¥–æ—Ä–æ–∂–∫–∏ –∏ –¥—Ä.)
- üéß –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–∞—É—à–Ω–∏–∫–æ–≤ –∏ –¥—Ä—É–≥–∏—Ö Bluetooth —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- üìù –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö (RSSI, —Å–µ—Ä–≤–∏—Å—ã, —Ç–∏–ø —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Clean Architecture:

```
lib/
‚îú‚îÄ‚îÄ core/                    # –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ constants/          # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ errors/             # –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ usecases/           # –ë–∞–∑–æ–≤—ã–µ use cases
‚îÇ   ‚îî‚îÄ‚îÄ utils/              # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ features/bluetooth/      # Bluetooth —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
‚îÇ   ‚îú‚îÄ‚îÄ data/               # –°–ª–æ–π –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ datasources/    # –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/         # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ repositories/   # –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
‚îÇ   ‚îú‚îÄ‚îÄ domain/             # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ entities/       # –°—É—â–Ω–æ—Å—Ç–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repositories/   # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ usecases/       # Use cases
‚îÇ   ‚îî‚îÄ‚îÄ presentation/       # UI —Å–ª–æ–π
‚îÇ       ‚îú‚îÄ‚îÄ bloc/           # BLoC –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
‚îÇ       ‚îú‚îÄ‚îÄ pages/          # –≠–∫—Ä–∞–Ω—ã
‚îÇ       ‚îî‚îÄ‚îÄ widgets/        # –í–∏–¥–∂–µ—Ç—ã
‚îî‚îÄ‚îÄ shared/                 # –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
    ‚îî‚îÄ‚îÄ di/                 # Dependency Injection
```

## –†–∞–∑—Ä–µ—à–µ–Ω–∏—è

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Bluetooth:

- `BLUETOOTH` - –±–∞–∑–æ–≤–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ Bluetooth
- `BLUETOOTH_ADMIN` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Bluetooth
- `BLUETOOTH_CONNECT` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º (Android 12+)
- `BLUETOOTH_SCAN` - —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (Android 12+)
- `ACCESS_FINE_LOCATION` - –¥–æ—Å—Ç—É–ø –∫ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—é –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- `ACCESS_COARSE_LOCATION` - –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. **–ó–∞–ø—É—Å–∫ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è**: –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ù–∞—á–∞—Ç—å —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ" –¥–ª—è –ø–æ–∏—Å–∫–∞ Bluetooth —É—Å—Ç—Ä–æ–π—Å—Ç–≤
2. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É**: –ù–∞–∂–º–∏—Ç–µ "–ü–æ–¥–∫–ª—é—á–∏—Ç—å" —Ä—è–¥–æ–º —Å –Ω—É–∂–Ω—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º
3. **–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤**: –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –∏ –¥–∞–Ω–Ω—ã–µ –æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Ä–∞–∑–¥–µ–ª–µ "–õ–æ–≥–∏"
4. **–û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É "–û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏" –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

- üì± –¢–µ–ª–µ—Ñ–æ–Ω—ã –∏ –ø–ª–∞–Ω—à–µ—Ç—ã
- ‚åö –£–º–Ω—ã–µ —á–∞—Å—ã
- üèÉ‚Äç‚ôÇÔ∏è –§–∏—Ç–Ω–µ—Å-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–±–µ–≥–æ–≤—ã–µ –¥–æ—Ä–æ–∂–∫–∏, –≤–µ–ª–æ—Ç—Ä–µ–Ω–∞–∂–µ—Ä—ã)
- üéß –ù–∞—É—à–Ω–∏–∫–∏ –∏ –≥–∞—Ä–Ω–∏—Ç—É—Ä—ã
- üîå –î—Ä—É–≥–∏–µ Bluetooth —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è Android**: API 21 (Android 5.0)
- **–¶–µ–ª–µ–≤–∞—è –≤–µ—Ä—Å–∏—è Android**: API 34 (Android 14)
- **State Management**: BLoC
- **Dependency Injection**: GetIt
- **Bluetooth**: flutter_blue_plus
- **–†–∞–∑—Ä–µ—à–µ–Ω–∏—è**: permission_handler

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥–æ–≤

–õ–æ–≥–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π:
- üî¥ **–û–®–ò–ë–ö–ê** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ (–∫—Ä–∞—Å–Ω—ã–π)
- üü† **–ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–æ—Ä–∞–Ω–∂–µ–≤—ã–π)
- üîµ **–ò–ù–§–û** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (—Å–∏–Ω–∏–π)
- ‚ö´ **–û–¢–õ–ê–î–ö–ê** - –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (—Å–µ—Ä—ã–π)

–ö–∞–∂–¥—ã–π –ª–æ–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç:
- –í—Ä–µ–º–µ–Ω–Ω—É—é –º–µ—Ç–∫—É
- –£—Ä–æ–≤–µ–Ω—å –≤–∞–∂–Ω–æ—Å—Ç–∏
- –°–æ–æ–±—â–µ–Ω–∏–µ
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–π:

1. –û–±–Ω–æ–≤–∏—Ç–µ `_getDeviceType()` –≤ `BluetoothDeviceModel`
2. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ use cases –≤ `domain/usecases/`
3. –û–±–Ω–æ–≤–∏—Ç–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ `presentation/`

## –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π.
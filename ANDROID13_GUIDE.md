# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ Android 13

## –ü—Ä–æ–±–ª–µ–º—ã —Å Bluetooth –≤ Android 13

Android 13 (API 33) –≤–≤–µ–ª –Ω–æ–≤—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è Bluetooth –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

### üîß –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ Android 13:

#### 1. **–ù–æ–≤—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è**
- `POST_NOTIFICATIONS` - –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `NEARBY_WIFI_DEVICES` - –¥–ª—è –ø–æ–∏—Å–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–ª–∞–≥–∏ –¥–ª—è `BLUETOOTH_CONNECT` –∏ `BLUETOOTH_SCAN`

#### 2. **–°—Ç—Ä–æ–≥–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º**
- –í—Å–µ Bluetooth —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—Ä–æ—à–µ–Ω—ã –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –†–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ç—Ä–µ–±—É—é—Ç —è–≤–Ω–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

#### 3. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**
- –ë–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –¥–æ—Å—Ç—É–ø –∫ Bluetooth –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
- –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ targetSdkVersion

### üõ†Ô∏è –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:

#### 1. **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π AndroidManifest.xml**
```xml
<!-- Android 13+ permissions -->
<uses-permission android:name="android.permission.POST_NOTIFICATIONS" />
<uses-permission android:name="android.permission.NEARBY_WIFI_DEVICES" />

<!-- Runtime permissions for Android 13+ -->
<uses-permission android:name="android.permission.BLUETOOTH_CONNECT" 
    android:usesPermissionFlags="neverForLocation" />
<uses-permission android:name="android.permission.BLUETOOTH_SCAN" 
    android:usesPermissionFlags="neverForLocation" />
```

#### 2. **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π build.gradle**
```gradle
defaultConfig {
    minSdkVersion 21
    targetSdkVersion 33  // Android 13
    // ...
}
```

#### 3. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π**
- –ó–∞–ø—Ä–æ—Å –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–∞–∂–¥–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞

### üì± –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º:

#### 1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è**
- –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—Ä–æ—Å–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

#### 2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**
- –°–º–æ—Ç—Ä–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ä–∞–∑–¥–µ–ª–µ "–õ–æ–≥–∏"
- –ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏ —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å Bluetooth

#### 3. **–ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ Android 13:**

**"Permission denied"**
- –†–µ—à–µ–Ω–∏–µ: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –≤—Å–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

**"Bluetooth scan failed"**
- –†–µ—à–µ–Ω–∏–µ: –í–∫–ª—é—á–∏—Ç–µ Bluetooth –∏ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ

**"App not found"**
- –†–µ—à–µ–Ω–∏–µ: –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### üîç –ü–æ—à–∞–≥–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π** - –≤—Å–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å "granted"
3. **–ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—Ä–æ—Å–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è"** –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
4. **–ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ"**
5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

### ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è:

1. **Target SDK**: –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ 33 (Android 13)
2. **–†–∞–∑—Ä–µ—à–µ–Ω–∏—è**: –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –£–ª—É—á—à–µ–Ω–∞ –¥–ª—è Android 13
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–æ–¥—Ä–æ–±–Ω–æ–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### üöÄ –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞—é—Ç—Å—è:

1. **–ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
2. **–û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
3. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ**
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Android**

### üìã –°–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –¥–ª—è Android 13:

- ‚úÖ `BLUETOOTH` - –±–∞–∑–æ–≤–æ–µ Bluetooth
- ‚úÖ `BLUETOOTH_ADMIN` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Bluetooth
- ‚úÖ `BLUETOOTH_CONNECT` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º
- ‚úÖ `BLUETOOTH_SCAN` - —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- ‚úÖ `ACCESS_FINE_LOCATION` - —Ç–æ—á–Ω–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
- ‚úÖ `ACCESS_COARSE_LOCATION` - –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
- ‚úÖ `POST_NOTIFICATIONS` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Android 13+)
- ‚úÖ `NEARBY_WIFI_DEVICES` - —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏ (Android 13+)

–í—Å–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ Android 13.
